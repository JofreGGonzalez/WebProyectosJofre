<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Jofre Web</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
        <link rel="stylesheet" href="../css/estil.css" />
        <link rel="stylesheet" href="../css/hojas.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script src="../js/language.js"></script>
        <script src="../js/temaOscuro.js"></script>
        <script src="../js/panelLateral.js"></script>
        <script src="../js/ocultarSecciones.js"></script>
        <script src="../js/copyText.js"></script>
        <script src="../js/pythonToSections.js"  defer></script>
        <!-- <link rel="preconnect" href="https://fonts.googleapis.com"> -->
        <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&family=Chiron+Sung+HK:ital,wght@0,200..900;1,200..900&family=Lobster&display=swap" rel="stylesheet">
        

    </head>
    <body>

        <!-- Menu -->

        <div id="navi" class="navBar">
            <button id="btnMenuLateral">☰</button>
            <a class="logo" href="#">Home</a>
        </div>

        <!--Panel lateral-->
        <div id="menuLateral"></div>

        <h1>Scraper para web de One Piece</h1>

        <section class="seccion mostrar">
            <h2 class="seccion-titulo">¿Que es?<span class="flecha">▼</span></h2>
            <div class="seccion-contenido">
                <div class="teseracto-container">
                    <div class="texto-teseracto">
                        <p>Un scraper es un programa informático o una herramienta que se utiliza para extraer datos de páginas web de forma automática.</p>
                        <p>Funciona como un robot que simula la navegación de un usuario para recopilar información.</p>
                    </div>

                    <img src="../imagenes/Scraper/Scraper01.png"  class="imgEstructuraTes noBackgr widt15">
                </div>
            </div>
        </section>

        <section class="seccion mostrar">
            <h2 class="seccion-titulo">Objetivo<span class="flecha">▼</span></h2>
            <div class="seccion-contenido">
                <div class="teseracto-container">
                    <img src="../imagenes/Scraper/Luffy.png" class="imgEstructuraTes noBackgr widt25">
                    <div class="texto-teseracto">
                        <p>El objetivo de éste proyecto es crear un scraper para la web <a href="https://onepiece.fandom.com/wiki/One_Piece_Wiki">https://onepiece.fandom.com/wiki/One_Piece_Wiki</a>.</p>
                        <p>Se quiere recopilar información sobre todos los personajes (nombres, edades, habilidades, apariciones, ...) y almacenar esta información en Excels o CSV para posteriormente usar esa información para futuros proyectos.</p>
                        <p>El proyecto no solo va a constar de un scraper sino que también se hará un post procesado de los datos para limpiarlos y dejorlos con coherencia.</p>
                        <p>Su creación servirá para aprender el funcionamiento de un scraper y cómo programarlo. También será de utilidad para poner en práctica técnicas de post procesado aprendidas en el grado universitario.</p>
                     </div>
                </div>
            </div>
        </section>

        <section class="seccion mostrar">
            <h2 class="seccion-titulo">Motivación<span class="flecha">▼</span></h2>
            <div class="seccion-contenido">
                <ul>
                    <li><p>Aprender a programar un scraper</p></li>
                    <li><p>Poner en práctica habilidades de postporcesado de datos</p></li>
                    <li><p>Poner en práctica mis conocimientos en programación en Python y librerías muy útiles como Numpy o Pandas </p></li>
                </ul>
            </div>
        </section>

        <section class="seccion mostrar">
            <h2 class="seccion-titulo">Código<span class="flecha">▼</span></h2>
            <div class="seccion-contenido">
                <p>Para el desarrollo del scraper se ha usado el leguaje de programación Python y el programa Jupyter Notebook. A continuación, vamos a ver paso a paso como se ha creado el scraper.</p>
                
                <ol>
                    <li>
                        <p>Importamos las librerias que vamos a usar:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso1"></code></pre>
                        </div>
                    </li>
                    <li>
                        <p>Definimos las variables que usaremos continuamente:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso2"></code></pre>
                        </div>
                    </li>
                    <li>
                        <p>Definimos el conjunto de funciones que extraeran los datos que queremos de la página web, es decir, estas funciones seran el core de nuestro scraper. Como dependiendo de la hoja que queramos extraer datos va a tener un código fuente diferente, vamos a crear múltiples funciones dependiendo de la información que queramos extraer:</p>
                        <p>La función Personajes, obtendrá toda la información personal de los personajes, a excepción del Haki, Raza, Género y Categoria debido a que su información és de difícil acceso:</p>

                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso3"></code></pre>
                        </div>

                        <p>La función PersonajesGenero, obtendrá el Género de todos los personajes:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso5"></code></pre>
                        </div>

                        <p>La función PersonajesHaki, obtendrá que usuarios tienen haki y de que tipo:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso6"></code></pre>
                        </div>

                        <p>La función RazasPersonajes, obtendrá la Raza de cada personaje de One Piece:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso8"></code></pre>
                        </div>
                    </li>
                    <li>
                        <p>Obtenemos los personajes Cannon y No Cannon y lo guarddamos en Excels (lo hace la própia función):</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso9"></code></pre>
                        </div>
                    </li>
                    <li>
                        <p>Obtenemos el Género de todos los personajes:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso10"></code></pre>
                        </div>
                    </li>
                    <li>
                        <p>Obtenemos los personajes que tienen haki y cual, y lo guardamos en Excels:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso11"></code></pre>
                        </div>
                        <p>Obtenemos las Razas de los personajes, y lo guardamos en Excels:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso12"></code></pre>
                        </div>
                    </li>
                    <li>
                        <p>Ahora entraremos en el tratamiento de dats y la unión de todos los datos:</p>

                        <p>para ello primero definiremos 3 funciones para tratar las recompensas (extraer_mayor_recompensa), para tratar la edad de los personajes (extract_max_age) y el tratamiento de la altura (extraer_ultima_altura):</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso13"></code></pre>
                        </div>
                        

                        <p>A continuación, vamos a leer todos los ficheros Excel y guardárlos en diferentes variables:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso14"></code></pre>
                        </div>

                        <p>Ahora vamos a realizar el tratamiento de datos de los personajes No Cannon:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso15"></code></pre>
                        </div>

                        <p>Ahora el tratamiento de los personajes Cannon que es igual que el de los No Cannon:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso16"></code></pre>
                        </div>

                        <p>Finalmente unimos los 2 dataset con los personajes Cannon y no Cannon y creamos una columna para saber si ése personaje es Cannon o no:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso17"></code></pre>
                        </div>

                        <p>Guardamos todo en un Excel:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso19"></code></pre>
                        </div>

                        <p>Addicionalmente, si queremos ver un resumen general de nuestros datos, podemos hacer lo siguiente:</p>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copiarCodigo(this)">Copiar</button>
                            <pre><code class="language-python" id="codigoPaso18"></code></pre>
                        </div>
                    </li>
                </ol>
            
            </div>
        </section>

        <section class="seccion mostrar">
            <h2 class="seccion-titulo">Tabla Excel final<span class="flecha">▼</span></h2>
            <div class="seccion-contenido">
                <div class="tabla-scroll">
                    <table>
                    <thead>
                        <tr>
                        <th>Nombre Pirata</th>
                        <th>Episodio de Aparición</th>
                        <th>Año de Aparición</th>
                        <th>Enlace</th>
                        <th>Enlace Foto</th>
                        <th>Nombre Fruta</th>
                        <th>Significado Fruta</th>
                        <th>Tipo Fruta</th>
                        <th>Afiliación</th>
                        <th>Ocupación</th>
                        <th>Origen</th>
                        <th>Status</th>
                        <th>Edad</th>
                        <th>Aniversario</th>
                        <th>Altura</th>
                        <th>Sangre</th>
                        <th>Recompensa</th>
                        <th>Género</th>
                        <th>Armadura</th>
                        <th>Observación</th>
                        <th>Rei</th>
                        <th>Canon</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>A O</td>
                            <td>0460</td>
                            <td>2009</td>
                            <td>/wiki/A_O</td>
                            <td><a href="https://static.wikia.nocookie.net/onepiece/images/8/8c/A_O_Anime_Infobox.png/revision/latest?cb=20230528152214" target="_blank">Imagen</a></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>A O Pirates</td>
                            <td>Pirate</td>
                            <td></td>
                            <td>Unknown</td>
                            <td>nan</td>
                            <td>January 15th</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>Male</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>Abdullah</td>
                            <td>0632</td>
                            <td>2013</td>
                            <td>/wiki/Abdullah</td>
                            <td><a href="https://static.wikia.nocookie.net/onepiece/images/f/f1/Abdullah_Anime_Infobox.png/revision/latest?cb=20151004140309" target="_blank">Imagen</a></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>Ideo Pirates</td>
                            <td>Pirate, Criminal</td>
                            <td></td>
                            <td>Alive</td>
                            <td>nan</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>Male</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>Basil Hawkins</td>
                            <td>0392</td>
                            <td>2008</td>
                            <td>/wiki/Basil_Hawkins</td>
                            <td><a href="https://static.wikia.nocookie.net/onepiece/images/f/f8/Basil_Hawkins_Anime_Post_Timeskip_Infobox.png" target="_blank">Imagen</a></td>
                            <td>Wara Wara no Mi</td>
                            <td>Straw</td>
                            <td>Paramecia</td>
                            <td>Hawkins Pirates</td>
                            <td>Pirate</td>
                            <td>North Blue</td>
                            <td>Unknown</td>
                            <td>31</td>
                            <td>September 9th</td>
                            <td>210 cm</td>
                            <td>S</td>
                            <td>320000000</td>
                            <td>Male</td>
                            <td>1</td>
                            <td>1</td>
                            <td></td>
                            <td>1</td>
                        </tr>
                        <tr>
                            <td>Belo Betty</td>
                            <td>0880</td>
                            <td>2018</td>
                            <td>/wiki/Belo_Betty</td>
                            <td><a href="https://static.wikia.nocookie.net/onepiece/images/d/dd/Belo_Betty_Anime_Infobox.png/revision/latest?cb=20240903112156" target="_blank">Imagen</a></td>
                            <td>Kobu Kobu no Mi</td>
                            <td>Encouragement</td>
                            <td>Paramecia</td>
                            <td>Revolutionary Army</td>
                            <td>East Army Commander of the Revolutionary Army</td>
                            <td>East Blue</td>
                            <td>Alive</td>
                            <td>34</td>
                            <td>June 15th</td>
                            <td>196 cm</td>
                            <td>XF</td>
                            <td>457000000</td>
                            <td>Female</td>
                            <td>1</td>
                            <td>1</td>
                            <td></td>
                            <td>1</td>
                        </tr>
                    </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="seccion mostrar">
            <h2 class="seccion-titulo">Descarga los Excels<span class="flecha">▼</span></h2>
            <div class="seccion-contenido">
                <div class="boton-contenedor">
                    <a href="../Download/OnePieceScraper.zip" download class="boton-descarga">
                        <span class="texto-archivo">Excels antes del tratamiento</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="icono-descarga" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M5 20h14v-2H5v2zm7-18L5.33 9h4.17v6h4V9h4.17L12 2z"/>
                        </svg>
                    </a>
                </div>
                <div class="boton-contenedor">
                    <a href="../Download/PostProcesado.zip" download class="boton-descarga">
                        <span class="texto-archivo">Excel post tratamiento</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="icono-descarga" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M5 20h14v-2H5v2zm7-18L5.33 9h4.17v6h4V9h4.17L12 2z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </section>

        <script src="../js/controlBarraSuperior.js"></script>
        <script src="../js/cargarMenu.js"></script>
        <!--Para resaltar texto python-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <!--<script>hljs.highlightAll();</script>-->
        <script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
        <script src="script.js"></script>
    </body>
   
</html>